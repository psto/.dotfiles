#!/usr/bin/env bash

# Rofi-Bangs forgot where i got this!
# combine different scipts into one gui interface
declare -A LABELS
declare -A COMMANDS
browser='brave-beta'

# List of defined 'bangs'

# List apps to launch
COMMANDS["run"]="rofi -modi drun -show drun -config ~/.config/rofi/rofidmenu.rasi"
LABELS["run"]="ğŸƒ"

# Quickly hyper
COMMANDS["edit-hypr"]='exec alacritty -e nvim ~/.config/hypr/hyprland.conf'
LABELS["edit-hypr"]="âœ¨"

# Quickly sway
COMMANDS["edit-sway"]='exec alacritty -e nvim ~/.config/sway/config'
LABELS["edit-sway"]="ğŸŒ³"

# Quickly edit this file
COMMANDS["edit-rofi-bangs"]='exec alacritty -e nvim ~/.local/bin/rofi-bangs'
LABELS["edit-rofi-bangs"]="â€¼ï¸"

################################################################################
# Run other rofi scripts
################################################################################

# call another rofi script with input template
# COMMANDS["command_name"]=" '~/path/to/scrips' "${input}""
# LABELS["command_name"]=""

# open bookmarks
COMMANDS["bookmarks"]="~/.local/bin/rofi-surfraw-bookmarks.sh"
LABELS["bookmarks"]="ğŸ”–"

# Broot
COMMANDS["broot"]='exec alacritty --class="floating" -e broot'
LABELS["broot"]=

# btop
COMMANDS["btop"]="exec alacritty -e btop"
LABELS["btop"]="ğŸ“ˆ"

# Listen to music
COMMANDS["rofi-beats"]="~/.local/bin/rofi-beats"
LABELS["rofi-beats"]="ğŸ§"

# lf file explorer
COMMANDS["lf"]='exec alacritty --class="floating" -e lf'
LABELS["lf"]="ğŸ—„ï¸"

# Obsidian quick note
COMMANDS["obsidian-quick-note"]='exec alacritty --class="floating" -e ~/.local/bin/obsidian-quick-note'
LABELS["obsidian-quick-note"]="âœï¸"

# Macho man pages
COMMANDS["macho"]="~/.local/bin/macho"
LABELS["macho"]="ğŸ’ª"

# Navi
COMMANDS["navi"]='exec alacritty --class="floating" -e navi'
LABELS["navi"]=""

# NCurses Disk Usage
COMMANDS["ncdu"]='exec alacritty --class="floating" -e ncdu --color dark'
LABELS["ncdu"]="ğŸ’½"

# killall
COMMANDS["killall"]='exec alacritty --class="floating" -e killall "${input}"'
LABELS["killall"]=""

# Rofi Calc
COMMANDS["calc"]="exec rofi -show calc -modi calc -no-show-match -no-sort -config ~/.config/rofi/rofidmenu.rasi"
LABELS["calc"]="ğŸ§®"

# Rofi WiFi
COMMANDS["wifi"]="~/.local/bin/rofi-wifi"
LABELS["wifi"]="ğŸ“¶"

# SciToPdf
COMMANDS["scitopdf"]='exec alacritty --hold --class="floating" -e scitopdf'
LABELS["scitopdf"]="ğŸ“„"

# Search for files
COMMANDS["fzf-search"]="~/.local/bin/rofi-search"
LABELS["fzf-search"]="ğŸ”"

# Spotify
COMMANDS["spotify"]='~/.local/bin/spotify-way'
LABELS["spotify"]="ğŸ§"

# Suspend
COMMANDS["suspend"]="suspend "${input}""
LABELS["suspend"]="ğŸ¥¶"

# Shutdown
COMMANDS["shutdown"]='shutdown "${input}"'
LABELS["shutdown"]="ğŸ“´"

# Shutdown
COMMANDS["reboot"]='reboot'
LABELS["reboot"]="ğŸŒ„"

# Tldr
COMMANDS["tldr"]='exec alacritty --hold --class="floating" -e tldr "${input}"'
LABELS["tldr"]="ğŸ—’ï¸"

# Todo
COMMANDS["do"]="exec rofi -modi TODO:~/.local/bin/rofi-todo -show TODO -config ~/.config/rofi/searchmenu.rasi"
LABELS["do"]="todo"

# Open webpage
COMMANDS["www"]='$browser "${input}"'
LABELS["www"]="ğŸŒ"

################################################################################
# Search
################################################################################

# open custom web searches
COMMANDS["/"]="~/.local/bin/rofi-surfraw-websearch.sh"
LABELS["/"]="ğŸ•¸ï¸"

# Brave
COMMANDS["b"]='$browser https://search.brave.com/search?q="${input}"'
LABELS["b"]="ğŸ¦"
# DevDocs
COMMANDS["dev"]='$browser https://devdocs.io/?q="${input}"'
LABELS["dev"]="ğŸ’»"
# DuckDuckGo
COMMANDS["d"]='$browser https://duckduckgo.com/?q="${input}"'
LABELS["d"]="ğŸ¦†"
# Google
COMMANDS["g"]='$browser www.google.com/search?q="${input}"'
LABELS["g"]="ğŸ•µï¸"
# Google Maps
COMMANDS["gm"]='$browser https://www.google.com/maps/search/"${input}"'
LABELS["gm"]="ğŸ—ºï¸"
# IMBD search
COMMANDS["imdb"]='$browser http://www.imdb.com/find?q="${input}"'
LABELS["imdb"]="ğŸ¥"
# Wikipedia search
COMMANDS["wi"]='$browser https://en.m.wikipedia.org/wiki/Special:Search/"${input}"'
LABELS["wi"]="ğŸ“š"
# Wikipedia PL search
COMMANDS["wipl"]='$browser https://pl.m.wikipedia.org/wiki/"${input}"'
LABELS["wipl"]="ğŸ“š"
# You Code search
COMMANDS["you"]='$browser https://you.com/search?q="${input}&fromSearchBar=true&tbm=youcode"'
LABELS["you"]="ğŸ’»"
# YouTube search
COMMANDS["yt"]='$browser http://www.youtube.com/results?search_query="${input}"'
LABELS["yt"]="â–¶ï¸ "
# Allegro search
COMMANDS["allegro"]='$browser https://allegro.pl/listing?string="${input}"'
LABELS["allegro"]="ğŸ›ï¸"
# 1337
COMMANDS["13"]='$browser https://1337x.to/search/"${input}"/1/'
LABELS["13"]="â˜ ï¸"

################################################################################
# Apps
################################################################################

# Brave Beta browser
COMMANDS["brave-beta"]="brave-beta-gpu"
LABELS["brave-beta"]="ğŸ¦"

# Beekeeper Studio
COMMANDS["beekeeper-studio"]="beekeeper-studio"
LABELS["beekeeper-studio"]="ğŸ"

# Bitwarden
COMMANDS["bitwarden"]="bitwarden"
LABELS["bitwarden"]="ğŸ”’"

# Bleachbit
COMMANDS["bleachbit"]="bleachbit"
LABELS["bleachbit"]="ğŸ§¹"

# Calibre
COMMANDS["calibre"]="calibre"
LABELS["calibre"]="ğŸ“š"

# Discord
COMMANDS["discord"]="discord"
LABELS["discord"]="ğŸ˜®"

# Firefox
COMMANDS["firefox"]="~/.local/bin/firefox-way"
LABELS["firefox"]="ğŸ¦Š"

# Firefox Developer
COMMANDS["firefox-developer-edition"]="firefox-nightly"
LABELS["firefox-developer-edition"]="ğŸº"

# Galculator
COMMANDS["galculator"]="galculator"
LABELS["galculator"]="ğŸ§®"

# Github Desktop
COMMANDS["github-desktop"]="github-desktop"
LABELS["github-desktop"]="ğŸ™"

# Insomnia
COMMANDS["insomnia"]="insomnia"
LABELS["insomnia"]="ğŸ˜´"

# IPFS Desktop
COMMANDS["ipfs-desktop"]="ipfs-desktop"
LABELS["ipfs-desktop"]="ğŸŒ"

# KeepassXC
COMMANDS["keepassxc"]="keepassxc"
LABELS["keepassxc"]="ğŸ”"

# Morgen
COMMANDS["morgen"]="morgen"
LABELS["morgen"]="ğŸ—“ï¸"

# Nextcloud
COMMANDS["nextcloud"]="nextcloud"
LABELS["nextcloud"]="â˜ï¸"

# Obsidian
COMMANDS["obsidian"]="obsidian"
LABELS["obsidian"]="ğŸ—’ï¸"

# qBittorrent
COMMANDS["qbittorrent"]="qbittorrent"
LABELS["qbittorrent"]="â˜ ï¸"

# Qutebrowser
COMMANDS["qutebrowser"]="qutebrowser"
LABELS["qutebrowser"]="ğŸŒ"

# Peek
COMMANDS["peek"]="peek"
LABELS["peek"]="ğŸ‘€"

# Signal
COMMANDS["signal-desktop"]="signal-desktop"
LABELS["signal-desktop"]="ğŸ“¡"

# SimpleScreenRecorder
COMMANDS["simplescreenrecorder"]="simplescreenrecorder"
LABELS["simplescreenrecorder"]="âºï¸ "

# Sioyek
COMMANDS["sioyek"]="sioyek"
LABELS["sioyek"]="ğŸ“„"

# Streamlink Twitch GUI
COMMANDS["streamlink-twitch-gui"]="streamlink-twitch-gui"
LABELS["streamlink-twitch-gui"]="ğŸï¸"

# Tor Browser
COMMANDS["tor-browser"]="tor-browser"
LABELS["tor-browser"]="ğŸ•µï¸"

# Transmission Remote
COMMANDS["transmission-remote"]="transmission-remote"
LABELS["transmission-remote"]="â˜ ï¸"

# Thunar
COMMANDS["thunar"]="thunar"
LABELS["thunar"]="ğŸ—„ï¸"

# Visual Studio Code
COMMANDS["code"]="code"
LABELS["code"]="ğŸ“‡"

# VLC
COMMANDS["vlc"]="vlc"
LABELS["vlc"]="ğŸ“º"

# VPN-Unlimited
COMMANDS["vpn-unlimited"]="vpn-unlimited"
LABELS["vpn-unlimited"]="ğŸ•µï¸"

# YouTube Music
COMMANDS["youtube-music"]="~/.local/bin/youtube-music-desktop"
LABELS["youtube-music"]="â–¶ï¸ "

# Zathura
COMMANDS["zathura"]="zathura"
LABELS["zathura"]="ğŸ“„"

################################################################################
# Run Script
################################################################################

# Generate menu
function print_menu()
{
for key in ${!LABELS[@]}
do
# echo "$key ${LABELS}"
echo "$key ${LABELS[$key]}"
# my top version just shows the first field in labels row, not two words side by side
done
}

# Show rofi.
function start()
{
print_menu | rofi -dmenu -p ":" -config ~/.config/rofi/rofidmenu.rasi
}

# Run it
value="$(start)"

# Split input.
# grab upto first space.
choice=${value%%\ *}

# graph remainder, minus space.
input=${value:$((${#choice}+1))}

# Cancelled? bail out
if test -z ${choice}
then
exit
fi

# check if choice exists
if test ${COMMANDS[$choice]+isset}
then
# Execute the choice
eval echo "Executing: ${COMMANDS[$choice]}"
eval ${COMMANDS[$choice]}
else
# eval $choice | rofi -config ~/.config/rofi/rofidmenu.rasi 

# prefer my above so I can use this same script to also launch appsa
echo "Unknown command: ${choice}" | rofi -dmenu -p "error"  -config ~/.config/rofi/rofidmenu.rasi 
fi
